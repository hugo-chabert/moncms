this.kubio=this.kubio||{},this.kubio.menuData=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=549)}({0:function(e,t){!function(){e.exports=this.wp.element}()},1:function(e,t){!function(){e.exports=this.wp.i18n}()},12:function(e,t){!function(){e.exports=this.wp.blocks}()},2:function(e,t){!function(){e.exports=this.lodash}()},25:function(e,t){!function(){e.exports=this.kubio.globalData}()},39:function(e,t,n){"use strict";e.exports=n(68)},41:function(e,t,n){"use strict";var o,r,i,u=n(69),s="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function c(){i=!1}function a(e){if(e){if(e!==o){if(e.length!==s.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,n){return t!==n.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. These characters were not unique: "+t.join(", "));o=e,c()}}else o!==s&&(o=s,c())}function l(){return i||(i=function(){o||a(s);for(var e,t=o.split(""),n=[],r=u.nextValue();t.length>0;)r=u.nextValue(),e=Math.floor(r*t.length),n.push(t.splice(e,1)[0]);return n.join("")}())}e.exports={get:function(){return o||s},characters:function(e){return a(e),o},seed:function(e){u.seed(e),r!==e&&(c(),r=e)},lookup:function(e){return l()[e]},shuffled:l}},48:function(e,t){!function(){e.exports=this.wp.apiFetch}()},549:function(e,t,n){"use strict";n.r(t),n.d(t,"useMenuBlockEditor",(function(){return k})),n.d(t,"MenuEntityProvider",(function(){return C})),n.d(t,"MENU_ITEM_BLOCK",(function(){return b})),n.d(t,"gutentagMenuEntity",(function(){return f})),n.d(t,"generateItemInitialData",(function(){return j})),n.d(t,"usePrimaryMenuBlockEditor",(function(){return L})),n.d(t,"useMenusLocations",(function(){return I})),n.d(t,"createPrimaryMenu",(function(){return E}));var o=n(0),r=n(25),i=n(48),u=n.n(i),s=n(12),c=n(8),a=n(1),l=n(2),d=n(39);const f={name:"menu",kind:"kubio",baseURL:"/kubio/v1/menu",plural:"menus",label:Object(a.__)("Menu","kubio"),mergedEdits:{meta:!0},getTitle:e=>{var t;return Object(l.isString)(null===(t=e)||void 0===t?void 0:t.data)&&(e=JSON.parse(e.data)),Object(l.get)(e,"menu.name",Object(a.__)("Menu Title","kubio"))}},b="kubio/menu-item",g={},h=Object(d.generate)();let p=Object(d.generate)();const v=()=>(g.context||(g.context=Object(o.createContext)()),g);function m(){var e;return null===(e=Object(o.useContext)(v().context))||void 0===e?void 0:e.id}const j=()=>{const e=-1*Date.now();return{id:e,parent:0,type:"custom",objectId:e,label:"",url:"",target:""}},O={content:{},isResolving:!1,hasResolved:!1,lastChange:h};function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=m(),r=null!=e?e:n,{editedEntity:i,isResolving:u,hasResolved:s}=Object(c.useSelect)((e=>({editedEntity:e("core").getEditedEntityRecord(f.kind,f.name,r,t),isResolving:e("core").isResolving("getEditedEntityRecord",[f.kind,f.name,r,t]),hasResolved:e("core").hasFinishedResolution("getEditedEntityRecord",[f.kind,f.name,r,t])}))),a=null==i?void 0:i.lastChange,l=null==i?void 0:i.data;return Object(o.useMemo)((()=>parseInt(r)?{content:l&&JSON.parse(l),isResolving:u,hasResolved:s,lastChange:a||h}:O),[l,u,s,r])}function M(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=m(),i=null!=t?t:r,{content:u,lastChange:s}=x(i,n),a=Object(o.useMemo)((()=>u&&u[e]),[u]),l=Object(o.useMemo)((()=>u&&(u.lastReloadUID||"")),[u]),{editEntityRecord:b}=Object(c.useDispatch)("core"),g=Object(o.useCallback)((function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const o={...u,[e]:t,lastReloadUID:n?Object(d.generate)():u.lastReloadUID};b(f.kind,f.name,i,{data:JSON.stringify(o),lastChange:Object(d.generate)()})}),[i,e,u]);return[a,g,s,l]}const y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(l.isArray)(e)?e.filter((e=>e.parent===t&&!Object(l.isUndefined)(e.id))).sort(((e,t)=>e.order-t.order)).map((t=>{let{id:n,parent:o,label:r,url:i,target:u,object:c,type:a,objectId:l}=t;return Object(s.createBlock)(b,{id:n,parent:o,label:r,url:i,target:u,object:c,type:a,objectId:l},y(e,n))})):[]},R=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(l.flatten)(e.map(((e,n)=>{let{attributes:o,innerBlocks:r}=e;const i=Object(l.merge)(j(),o);return[{...Object(l.omit)(i,"kubio"),order:n+1,parent:t},...R(r,o.id)]})))},k=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=m(),r=null!=e?e:n,{isResolving:i,hasResolved:u}=x(r,t),[s,c,a,d]=M("items",r,t),[f,b]=M("menu",r,t),g=Object(o.useCallback)((e=>{const t=R(e);Object(l.isEqual)(s,t)||c(t)}),[c,s]);return{id:r,items:s,setItems:c,onChange:g,menu:f,setMenu:b,onInput:l.noop,itemsToBlocks:y,isResolving:i,hasResolved:u,lastChangeUID:a,lastReloadUID:d}},w=()=>Object(c.select)("core/block-editor").getSettings().kubioPrimaryMenuLocation,L=()=>{const e=w(),{getMenuLocations:t}=I(),n=t(),r=Object(o.useMemo)((()=>{var t;return null===(t=Object(l.find)(n,{name:e}))||void 0===t?void 0:t.menu}),[(null==n?void 0:n.length)||0]);return{...k(r),exists:!!r}},E=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(a.__)("Main menu","kubio");const{saveMenu:t}=Object(c.dispatch)("core"),n=await t({name:e}),o=w();let r=null;n&&(r=n.id,await u()({path:"kubio/v1/menu/save-menu-location",method:"POST",data:{location:o,id:r}}),p=Object(d.generate)(),await Object(c.select)("core").getMenuLocations({_:p}))},I=()=>{const{menuLocations:e,setMenuLocations:t}=Object(r.useGlobalDataMenuLocations)(),{getMenuLocations:n,isResolvingLocation:o,hasResolvedLocations:i}=Object(c.useSelect)((e=>({getMenuLocations:e("core").getMenuLocations,isResolvingLocation:e("core").isResolving("getMenuLocations"),hasResolvedLocations:e("core").hasFinishedResolution("getMenuLocations")})));return{menuLocations:e||[],getMenuLocations:n,isResolvingLocation:o,hasResolvedLocations:i,updateLocationMenu:(n,o)=>{const r=e.map((e=>{const t={...e};return t.name===n&&(t.menu=parseInt(o)),t}));t(r)}}},C=e=>{let{id:t,children:n}=e;const r=v().context.Provider,i=Object(o.useMemo)((()=>({id:t})),[t]);return Object(o.createElement)(r,{value:i},n)};(()=>{const e=Object(c.subscribe)((()=>{const t=Object(c.select)("core"),n=Object(c.dispatch)("core");if(!t||!n)return;const o=t.getEntitiesByKind("kubio"),{addEntities:r}=n;Object(l.find)(o,{name:f.name})||(r([f]),e())}))})()},68:function(e,t,n){"use strict";var o=n(41),r=n(70),i=n(74),u=n(75)||0;function s(){return r(u)}e.exports=s,e.exports.generate=s,e.exports.seed=function(t){return o.seed(t),e.exports},e.exports.worker=function(t){return u=t,e.exports},e.exports.characters=function(e){return void 0!==e&&o.characters(e),o.shuffled()},e.exports.isValid=i},69:function(e,t,n){"use strict";var o=1;e.exports={nextValue:function(){return(o=(9301*o+49297)%233280)/233280},seed:function(e){o=e}}},70:function(e,t,n){"use strict";var o,r,i=n(71);n(41);e.exports=function(e){var t="",n=Math.floor(.001*(Date.now()-1567752802062));return n===r?o++:(o=0,r=n),t+=i(7),t+=i(e),o>0&&(t+=i(o)),t+=i(n)}},71:function(e,t,n){"use strict";var o=n(41),r=n(72),i=n(73);e.exports=function(e){for(var t,n=0,u="";!t;)u+=i(r,o.get(),1),t=e<Math.pow(16,n+1),n++;return u}},72:function(e,t,n){"use strict";var o,r="object"==typeof window&&(window.crypto||window.msCrypto);o=r&&r.getRandomValues?function(e){return r.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],n=0;n<e;n++)t.push(Math.floor(256*Math.random()));return t},e.exports=o},73:function(e,t){e.exports=function(e,t,n){for(var o=(2<<Math.log(t.length-1)/Math.LN2)-1,r=-~(1.6*o*n/t.length),i="";;)for(var u=e(r),s=r;s--;)if((i+=t[u[s]&o]||"").length===+n)return i}},74:function(e,t,n){"use strict";var o=n(41);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6)&&!new RegExp("[^"+o.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e)}},75:function(e,t,n){"use strict";e.exports=0},8:function(e,t){!function(){e.exports=this.wp.data}()}});
